.form {
  fieldset.fieldset {
    border : none;
    padding: 0;
    margin : 0;

    &--inline {
      display: flex;
      gap    : 2ch;
    }

    legend {
      display    : flex;
      font-weight: bold;
      color      : hsl(var(--fg-contrast));
    }
  }

  &-control {
    display       : flex;
    gap           : 1ch;
    padding-inline: var(--space-xxs);

    &--stack {
      flex-direction: column;
      gap           : 0.25ch;
    }

    &+& {
      margin-top: 1ch;
    }

    input {

      &:where([type="radio"], [type="checkbox"], [type="button"]),
      &:where([type="radio"], [type="checkbox"], [type="button"])+label {
        cursor: pointer;
      }

      &[type="radio"] {
        @extend .sr-only;

        &+label {
          align-items: center;
          display    : flex;
          gap        : 1ch;

          &::before {
            content         : "";
            --size          : 1ch;
            background-color: hsl(var(--fg-default) / 20%);
            border-radius   : 100%;
            height          : var(--size);
            outline         : 2px solid hsl(var(--fg-default));
            width           : var(--size);
            transition      : outline-offset 300ms;
          }
        }

        &:checked+label {
          &::before {
            background-color: transparent;
            background-image: radial-gradient(circle at center, hsl(var(--primary-700)) 75%, transparent 75%);
            outline-color   : hsl(var(--primary-700));
            outline-offset  : 2px;
          }
        }

        &:focus-visible+label {
          &::before {
            outline-offset: 5px;
          }
        }
      }
    }

    &--floating {
      display: grid;

      &>* {
        grid-row   : 1/2;
        grid-column: 1/2;
      }

      .form {
        &-label {
          align-items: center;
          cursor     : text;
          display    : flex;
          padding    : 1ch;
          transition : opacity 200ms;
          z-index    : 1;
        }

        &-input {
          &:placeholder-shown {
            &:focus-visible+label {
              opacity: 0.5;
            }
          }

          &:not(:placeholder-shown) {
            &+label {
              opacity: 0;
            }
          }
        }
      }
    }
  }

  &-label {
    color                  : hsl(var(--fg-default));
    font-variation-settings: 'wght'600;
  }

  &-input {
    border-radius   : var(--radius-2);
    border          : none;
    background-color: hsl(var(--bg-default) / 25%);
    color           : hsl(var(--fg-contrast));
    font-family     : var(--font-sans);
    font-size       : var(--type-size);
    padding         : 1ch;
    order           : 2;
    outline         : 3px solid hsl(var(--primary-700) / 0);
    transition      : outline-offset 200ms, outline-color 200ms;

    &:focus-visible {
      background-color: hsl(var(--bg-default));
      outline-color   : hsl(var(--primary-700));
    }

    &:placeholder-shown:focus-visible {
      outline-offset: 5px;
    }

    &:not([required])+.form-label {
      display    : flex;
      gap        : 1ch;
      align-items: baseline;

      &::after {
        content       : "Optional";
        text-transform: uppercase;
        font-size     : var(--type-size-7);
      }
    }
  }

  &-comment {
    font-size: var(--type-size-7);
  }
}